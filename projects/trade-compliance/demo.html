<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Batch Analysis Demo: Trade Engine | Krishna Dayma</title>
  <meta name="description" content="A batch analysis simulation for the Global Trade Analysis Engine project." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* ===== "SUITS" EXECUTIVE DOSSIER THEME (Demo Page) ===== */
    :root {
      --bg-primary: #121212; --bg-secondary: #1E1E1E; --bg-tertiary: #2a2a2a;
      --text-primary: #EAEAEA; --text-secondary: #CCCCCC; --text-muted: #999999;
      --text-success: #7ee081; --accent-primary: #A0A0A0; --accent-secondary: #4a5568; 
      --border-color: #2C2C2C; --radius: 0.8rem; --shadow: 0 8px 30px rgba(0,0,0,0.6);
      --transition: 0.2s ease;
    }
    
    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
    body{ margin:0; font-family: 'Inter', system-ui, sans-serif; background: var(--bg-primary); color: var(--text-secondary); line-height: 1.6; padding: 2rem; -webkit-font-smoothing: antialiased; }
    .container{ max-width: 1200px; margin: 0 auto; }
    
    header{ background: var(--bg-secondary); border-radius: var(--radius); padding: 2.5rem; border: 1px solid var(--border-color); margin-bottom: 2rem; text-align: center; box-shadow: var(--shadow); }
    header h1{ color: var(--text-primary); margin:0; font-size:clamp(2rem, 5vw, 3rem); letter-spacing: -1px; }
    .subtitle { margin-top: 0.5rem; color: var(--text-muted); font-weight: 500; }
    
    .card { background: var(--bg-secondary); border-radius: var(--radius); padding: 2rem; border: 1px solid var(--border-color); margin-bottom: 2rem; }
    .card h2 { margin: 0 0 1rem; color: var(--accent-primary); font-size: 1.5rem; border-bottom: 1px solid var(--border-color); padding-bottom: 0.75rem; }
    .card p { color: var(--text-secondary); max-width: 75ch; }

    /* Demo Specifics */
    #demo-output {
      background: #0D0D0D; padding: 1.5rem; border-radius: 0.5rem;
      border: 1px solid var(--border-color); font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Courier New", monospace;
      white-space: pre-wrap; color: var(--text-secondary); font-size: 0.9rem;
      min-height: 300px; margin-top: 1.5rem; counter-reset: line;
      overflow-x: auto;
    }
    #demo-output .log-line { display: block; }
    #demo-output .log-line::before {
        content: counter(line);
        counter-increment: line;
        color: var(--accent-secondary);
        display: inline-block;
        width: 3em;
        text-align: right;
        margin-right: 1em;
        border-right: 1px solid var(--border-color);
        padding-right: 1em;
    }
    .log-line.success { color: var(--text-success); font-weight: 600; }
    .log-line.info { color: var(--accent-primary); }

    /* Buttons */
    .btn-group { display: flex; gap: 1rem; flex-wrap: wrap; margin-top: 1.5rem; }
    .btn { display:inline-flex; align-items:center; justify-content: center; gap:.5rem; padding:.75rem 1.25rem; border-radius:.6rem; border:1px solid var(--border-color); background:var(--accent-secondary); color:var(--text-primary); cursor:pointer; text-decoration: none; font-weight: 600; transition: all var(--transition); }
    .btn:hover { transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0,0,0,0.5); }
    .btn-primary{ background:linear-gradient(135deg, #BDBDBD 0%, #A0A0A0 100%); color: #121212; border-color: #888888; font-weight: 700; }
    .btn:disabled { cursor: not-allowed; background: var(--bg-tertiary); color: var(--text-muted); transform: none; box-shadow: none; }

    footer{ margin-top: 2rem; padding-top: 2rem; text-align:center; color:var(--text-muted); border-top: 1px solid var(--border-color); }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Batch Analysis Simulation</h1>
      <p class="subtitle">PROJECT: GLOBAL TRADE ANALYSIS ENGINE (KD-GTA-002)</p>
    </header>

    <main>
      <div class="card">
        <h2>AUTOMATED SCENARIO TESTING</h2>
        <p>This simulation runs a predefined set of scenarios through the Global Trade Analysis Engine. It demonstrates the model's ability to handle various trade routes, product categories, and logistical complexities, including the application of Free Trade Agreements (FTAs).</p>
        <div class="btn-group">
            <button class="btn btn-primary" id="runDemoBtn">‚ñ∂Ô∏è Initiate Batch Analysis</button>
        </div>
        <pre id="demo-output"></pre>
      </div>

      <div class="card">
        <h2>ACTION PANEL</h2>
        <p>Return to the main portfolio or the interactive dashboard.</p>
        <div class="btn-group">
            <a class="btn btn-primary" href="../../index.html" title="Return to Main Portfolio">üè† Return to Main Portfolio</a>
            <a class="btn" href="index.html" title="Interactive Dashboard">‚ñ∂Ô∏è Go to Interactive Dashboard</a>
            <a class="btn" href="documentation.html" title="Technical Documentation">üìÑ Review Technical Documentation</a>
        </div>
      </div>
    </main>

    <footer>
      <div>&copy; 2024 Krishna Dayma | Project Dossier KD-GTA-002</div>
    </footer>
  </div>

  <script>
    // Self-contained logic for the demo page, using a simplified model from app.js
    document.addEventListener('DOMContentLoaded', () => {
        const runDemoBtn = document.getElementById('runDemoBtn');
        const outputEl = document.getElementById('demo-output');

        const TAX_RATES = { usa: 0.10, china: 0.13, japan: 0.10, germany: 0.19, uk: 0.20, france: 0.20, india: 0.18, italy: 0.22, brazil: 0.25, canada: 0.05 };
        const BASE_DUTY_RATES = { electronics: 0.05, machinery: 0.07, automotive: 0.10, pharmaceuticals: 0.03, textiles: 0.12, food: 0.15 };
        const TRADE_AGREEMENTS = { 'canada-usa': 0, 'usa-canada': 0, 'germany-france': 0, 'france-germany': 0, 'uk-japan': 0.5, 'japan-uk': 0.5 };

        const demoScenarios = [
            { origin: 'china', destination: 'usa', category: 'electronics', value: 75000, insurance: 400, shippingMode: 'sea' },
            { origin: 'germany', destination: 'france', category: 'automotive', value: 120000, insurance: 800, shippingMode: 'sea' },
            { origin: 'japan', destination: 'uk', category: 'machinery', value: 250000, insurance: 1500, shippingMode: 'air' },
            { origin: 'india', destination: 'italy', category: 'textiles', value: 30000, insurance: 200, shippingMode: 'air' }
        ];

        function calculateLandedCost(scenario) {
            const agreementKey = `${scenario.origin}-${scenario.destination}`;
            const baseRate = BASE_DUTY_RATES[scenario.category] ?? 0.08;
            const dutyRate = TRADE_AGREEMENTS.hasOwnProperty(agreementKey) ? baseRate * TRADE_AGREEMENTS[agreementKey] : baseRate;
            const taxRate = TAX_RATES[scenario.destination] ?? 0.15;
            const shippingBaseCost = scenario.value * (scenario.shippingMode === 'air' ? 0.12 : 0.06);
            const importDuty = scenario.value * dutyRate;
            const taxableValue = scenario.value + shippingBaseCost + scenario.insurance;
            const tax = (taxableValue + importDuty) * taxRate;
            return scenario.value + shippingBaseCost + scenario.insurance + importDuty + tax;
        }

        function logToConsole(message, type = '') {
            const line = document.createElement('span');
            line.className = `log-line ${type}`;
            line.textContent = message;
            outputEl.appendChild(line);
        }

        async function runDemo() {
            runDemoBtn.disabled = true;
            outputEl.innerHTML = '';
            
            const wait = (ms) => new Promise(resolve => setTimeout(resolve, ms));
            
            logToConsole('Initiating batch analysis simulation...', 'info');
            await wait(500);

            for (let i = 0; i < demoScenarios.length; i++) {
                const scenario = demoScenarios[i];
                logToConsole(`\nRunning Scenario ${i + 1}: ${scenario.origin.toUpperCase()} -> ${scenario.destination.toUpperCase()} (${scenario.category})`);
                await wait(250);
                
                logToConsole('  Calculating landed cost...');
                await wait(500);
                
                const totalCost = calculateLandedCost(scenario);
                const currency = (new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 0, maximumFractionDigits: 0 })).format(totalCost);
                
                logToConsole(`  SUCCESS: Estimated Total Landed Cost: ${currency}`, 'success');
                await wait(250);
            }
            
            logToConsole('\nBatch analysis complete. All scenarios processed.', 'info');
            runDemoBtn.disabled = false;
        }

        if (runDemoBtn) {
            runDemoBtn.addEventListener('click', runDemo);
        }
    });
  </script>
</body>
</html>
